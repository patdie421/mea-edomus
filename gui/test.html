<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8" />
      <title>Socket.io</title>
   </head>
 
   <body>
      <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

      <h1>Communication avec socket.io !</h1>
      <div id="info"></div>
      <button id="connexion">connexion</button> 
      <script>

         function socketio_available() {

            var socketio_addr=window.location.protocol + '//' + window.location.hostname + ':8000';
//            var socket = io.connect('http://ried3.local:8000');
            var socket = io.connect(socketio_addr);

            socket.on('log', function(message) {
               $("#info").append("<div>LOG : "+message+"</div>");
            });

            socket.on('key', function(message) {
               socket.emit('key','12345678');
            });
         }


         function socketio_unavailable() {
            $("#info").append("<div>Pas d'iosocket on va faire sans</div>");
         }


         $(document).ready(function() {
            var socketiojs_url=window.location.protocol + '//' + window.location.hostname + ':8000/socket.io/socket.io.js';
            // var socketio_url=http://ried3.local:8000/socket.io/socket.io.js;

            $.getScript(socketiojs_url)
	             .done(function() {
		              socketio_available();
	             })
	             .fail(function() {
		              socketio_unavailable();
               });
         });

        </script>
    </body>
</html>
