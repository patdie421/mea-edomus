//
//  automatorServer.h
//  mea-edomus
//
//  Created by Patrice Dietsch on 24/11/2013.
//
//
#ifndef __automatorServer_h
#define __automatorServer_h

#include <inttypes.h>
#include <sys/time.h>

typedef struct automatorInput_s {
   uint8_t used; // 0 unused, 1 used
   uint16_t index; // input index
   uint8_t type; // type of input (BOOLEAN, INTEGER, FLOAT)
   union { // en fonction du type
      int32_t integer;
      double analog;
      uint8_t boolean;
  } current, last;
  
  uint16_t status; // status flag
  struct timeval lastChangeTime; // last update time
} automatorInput_t;

pid_t start_automatorServer(char *db_path);
void automator(char *db_path);


#endif
